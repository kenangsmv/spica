<div class="default-charts" *ngIf="componentData$ | async; let componentData">
  <ng-template #canvasElement>
    <canvas
      baseChart
      [data]="componentData.data"
      [datasets]="componentData.datasets"
      [labels]="componentData.label"
      [options]="componentData.options"
      [colors]="componentData.colors"
      [legend]="componentData.legend"
      [plugins]="componentData.plugins"
      [chartType]="type"
    >
    </canvas>
  </ng-template>
  <ng-container>
    <mat-card-header
      ><mat-card-title>
        {{ componentData.title }}
      </mat-card-title>
    </mat-card-header>
    <button
      *ngIf="refresh"
      class="refresh"
      mat-icon-button
      matTooltip="Refresh data"
      (click)="onUpdate.next(componentData.filters)"
    >
      <mat-icon>refresh</mat-icon>
    </button>
    <div class="filters" *ngIf="isSmallComponent">
      <div *ngFor="let filter of componentData.filters">
        <span
          [name]="filter.key"
          [inputPlacer]="filter"
          [(ngModel)]="filter.value"
          (keyup.enter)="onUpdate.next(componentData.filters)"
        >
        </span>
      </div>
    </div>
    <div class="chart-container" *ngIf="!isSmallComponent">
      <ng-container *ngTemplateOutlet="canvasElement"> </ng-container>
    </div>
    <div class="show-chart" *ngIf="isSmallComponent">
      <button class="show-chart-button" (click)="onShowChartClicked()">show chart</button>
      <div
        class="hidden-chart"
        [ngClass]="showChart ? 'chart-container-unhidden' : 'chart-container-hidden'"
      >
        <ng-container *ngTemplateOutlet="canvasElement"> </ng-container>
      </div>
    </div>
  </ng-container>
</div>
